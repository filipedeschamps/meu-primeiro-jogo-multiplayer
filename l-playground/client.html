<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Um clone do "Meu Primeiro Jogo Multiplayer" do Filipe</title>
    <style>
        #screen {
            border: 10px solid #CCC;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            image-rendering: -moz-crisp-edges;
            width: 400px;
            height: 400px;
        }
    </style>
</head>
<body>
    <canvas id="screen" width="10" height="10"></canvas>
</body>
<script>
    const screen = document.querySelector("#screen");
    const context = screen.getContext("2d");
    const currentPlayerId = "player1";
    const game = {
        players: {
            "player1": { x: 1, y: 1 },
            "player2": { x: 9, y: 9 }
        },
        fruits: {
            "fruit1": { x:3, y:1 }
        }
    };

    document.addEventListener("keydown", handleKeydown);

    function handleKeydown(e){
        const keyP = e.key;
        const player = game.players[currentPlayerId];

        if(keyP === "ArrowUp" && player.y - 1 >= 0){
            player.y = player.y - 1;
            return;
        }

        if(keyP === "ArrowRight" && player.x + 1 < screen.width){
            player.x = player.x + 1;
            return;
        }

        if(keyP === "ArrowDown" && player.y + 1 < screen.height){
            player.y = player.y + 1;
            return;
        }

        if(keyP === "ArrowLeft" && player.x - 1 >= 0){
            player.x = player.x - 1;
            return;
        }
    }

    renderScreen();

    function renderScreen(){
        context.fillStyle = "#fff";
        context.clearRect(0, 0, 10, 10);

        for(let playerId in game.players){
            const player = game.players[playerId];
            context.fillStyle = "#000";
            context.fillRect(player.x, player.y, 1,1);
        }

        for(let fruitId in game.fruits){
            const fruit = game.fruits[fruitId];
            context.fillStyle = "green";
            context.fillRect(fruit.x, fruit.y, 1,1);
        }

        requestAnimationFrame(renderScreen);
    }
</script>
</html>